"use strict";(self["webpackChunkwumei"]=self["webpackChunkwumei"]||[]).push([[245],{8245:function(r,e,t){t.r(e),t.d(e,{default:function(){return u}});var s=function(){var r=this,e=r._self._c;return e("div",{staticClass:"redirect"},[e("el-main",[e("div",{staticClass:"el-col hidden-md-and-down"},[e("h1",[r._v("物美智能 - 物联美好生活")]),e("h2",[r._v("wumei smart open source iot platform")]),e("el-row",[e("el-button",{attrs:{type:"warning"}},[r._v("返回官网")]),e("el-button",{attrs:{type:"success"}},[r._v("查看文档")]),e("el-button",{on:{click:r.record}},[r._v("账号登录")])],1)],1),e("div",{staticClass:"el-col2"},[e("el-form",{ref:"formIns",attrs:{model:r.ruleForm,rules:r.rules}},[e("h3",[r._v("注册账号")]),e("el-form-item",{attrs:{prop:"username"}},[e("el-input",{attrs:{placeholder:"账号"},model:{value:r.ruleForm.username,callback:function(e){r.$set(r.ruleForm,"username","string"===typeof e?e.trim():e)},expression:"ruleForm.username"}})],1),e("el-form-item",{attrs:{prop:"phonenumber"}},[e("el-input",{attrs:{placeholder:"手机号码"},model:{value:r.ruleForm.phonenumber,callback:function(e){r.$set(r.ruleForm,"phonenumber","string"===typeof e?e.trim():e)},expression:"ruleForm.phonenumber"}})],1),e("el-form-item",{attrs:{prop:"password"}},[e("el-input",{attrs:{"show-password":"",placeholder:"密码"},model:{value:r.ruleForm.password,callback:function(e){r.$set(r.ruleForm,"password","string"===typeof e?e.trim():e)},expression:"ruleForm.password"}})],1),e("el-form-item",{attrs:{prop:"confirmPassword"}},[e("el-input",{attrs:{"show-password":"",placeholder:"确认密码"},model:{value:r.ruleForm.confirmPassword,callback:function(e){r.$set(r.ruleForm,"confirmPassword","string"===typeof e?e.trim():e)},expression:"ruleForm.confirmPassword"}})],1),e("el-form-item",{attrs:{prop:"codes"}},[e("el-input",{staticClass:"verify",attrs:{placeholder:"验证码"},on:{click:r.imgCode},model:{value:r.ruleForm.codes,callback:function(e){r.$set(r.ruleForm,"codes","string"===typeof e?e.trim():e)},expression:"ruleForm.codes"}}),e("img",{attrs:{src:"data:image/gif;base64,"+r.bigImg},on:{click:r.imgCode}})],1),e("el-row",[e("el-button",{attrs:{type:"primary"},on:{click:r.enroll}},[r._v("注册")])],1)],1)],1)]),e("el-footer",{staticStyle:{height:"auto"}},[r._v("Copyright © 2018-2021 wumei smart All Rights Reserved.")])],1)},o=[],i=(t(7658),{name:"Redirect",data(){const r=(r,e,t)=>{if(0===e.length)return t(new Error("请输入账号"));let s=/^(?:(?:\+|00)86)?1\d{10}$/,o=/^[a-zA-Z0-9_-]{4,16}$/;if(!s.test(e)&&!o.test(e))return t(new Error("用户账号长度必须介于 4 和 16 之间"));t()},e=(r,e,t)=>{if(0===e.length)return t(new Error("请输入手机号"));let s=/^(?:(?:\+|00)86)?1\d{10}$/;if(!s.test(e))return t(new Error("请输入正确手机号"));t()},t=(r,e,t)=>{if(0===e.length)return t(new Error("请输入密码"));let s=/^.{5,20}$/;if(!s.test(e))return t(new Error("用户密码长度必须介于 5 和 20 之间"));t()},s=(r,e,t)=>0===e.length?t(new Error("请再次输入密码")):e!==this.ruleForm.password?t(new Error("两次输入密码不一致")):void t();return{ruleForm:{password:"",codes:"",uuid:"",bindId:"",confirmPassword:"",phonenumber:"",username:""},rules:{username:[{validator:r,trigger:"blur"}],password:[{validator:t,trigger:"blur"}],phonenumber:[{validator:e,trigger:"blur"}],confirmPassword:[{validator:s,trigger:"blur"}]},bigImg:""}},methods:{record(){this.$router.push("/login")},async enroll(){try{await this.$refs.formIns.validate();let{bindId:r,codes:e,confirmPassword:t,password:s,phonenumber:o,username:i,uuid:l}=this.ruleForm,{code:a,_:n,msg:u}=await this.$api.registers(r,e,t,s,o,i,l);200===+a?(this.$message.success("注册成功"),this.$router.push("/login")):(this.$message.error(u),this.imgCode())}catch(r){}},async imgCode(){try{let{code:r,uuid:e,img:t}=await this.$api.captImage();200===+r?(this.ruleForm.uuid=e,this.bigImg=t):this.$message.error("验证码获取失败")}catch(r){}}},created(){this.imgCode()}}),l=i,a=t(1001),n=(0,a.Z)(l,s,o,!1,null,"fe173a0c",null),u=n.exports}}]);