"use strict";(self["webpackChunkwumei"]=self["webpackChunkwumei"]||[]).push([[963],{4963:function(e,t,a){a.r(t),a.d(t,{default:function(){return c}});var l=function(){var e=this,t=e._self._c;return t("div",{staticClass:"IotCategory"},[t("el-card",{staticClass:"box-card"},[t("el-form",{ref:"screen",staticClass:"fromone",attrs:{model:e.screen,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"分类名称"}},[t("el-input",{attrs:{clearable:"",placeholder:"请输入产品分类名称"},model:{value:e.screen.categoryName,callback:function(t){e.$set(e.screen,"categoryName",t)},expression:"screen.categoryName"}})],1),t("el-form-item",{staticClass:"search"},[t("el-button",{attrs:{type:"primary"},on:{click:e.initName}},[e._v("搜索")]),t("el-button",{on:{click:e.reset}},[e._v("重置")])],1),t("el-form-item",{staticClass:"add"},[t("el-button",{attrs:{type:"primary",plain:""},on:{click:function(t){e.dialogVisible=!0}}},[e._v("新增")])],1)],1)],1),t("el-card",{staticClass:"box-card"},[t("el-table",{staticClass:"ovfo",staticStyle:{width:"100%"},attrs:{data:e.rows,fit:"",border:""}},[t("el-table-column",{attrs:{label:"产品分类名称",prop:"categoryName"}}),t("el-table-column",{attrs:{label:"备注",prop:"remark"}}),t("el-table-column",{attrs:{label:"系统定义",prop:"isSys"}}),t("el-table-column",{attrs:{label:"排序",prop:"orderNum"}}),t("el-table-column",{attrs:{label:"创建时间","min-width":"110px",prop:"createTime"}}),t("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function({row:a}){return[t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.modify(a)}}},[e._v("修改")])]}}])})],1),t("el-pagination",{attrs:{background:"","current-page":e.screen.pageNum,"page-sizes":[10,20,30,40],"page-size":e.screen.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.totalpage},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),t("el-dialog",{attrs:{width:"600px",title:"添加产品分类",visible:e.dialogVisible,"before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("el-form",{attrs:{model:e.popup}},[t("el-form-item",{attrs:{label:"分类名称",prop:"categoryName","label-width":"100px",rules:[{required:!0,message:"产品分类名称不能为空",trigger:"blur"}]}},[t("el-input",{attrs:{placeholder:"请输入产品分类名称"},model:{value:e.popup.categoryName,callback:function(t){e.$set(e.popup,"categoryName","string"===typeof t?t.trim():t)},expression:"popup.categoryName"}})],1),t("el-form-item",{attrs:{label:"显示顺序",prop:"orderNum","label-width":"100px"}},[t("el-input-number",{attrs:{"controls-position":"right",placeholder:"请输入显示顺序"},model:{value:e.popup.orderNum,callback:function(t){e.$set(e.popup,"orderNum","string"===typeof t?t.trim():t)},expression:"popup.orderNum"}})],1),t("el-form-item",{attrs:{label:"显示顺序",prop:"remark","label-width":"100px"}},[t("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入内容"},model:{value:e.popup.remark,callback:function(t){e.$set(e.popup,"remark","string"===typeof t?t.trim():t)},expression:"popup.remark"}})],1),[t("el-button",{attrs:{type:"primary"},on:{click:e.addCategory}},[e._v("确定")]),t("el-button",{on:{click:e.handleClose}},[e._v("取消")])]],2)],1)],1)},r=[],i=a(6280),o={name:"IotCategory",data(){return{screen:{categoryName:"",pageNum:1,pageSize:10},popup:{categoryId:null,categoryName:"",createBy:null,createTime:null,delFlag:null,isSys:null,orderNum:"",parentId:null,remark:"",tenantId:null,tenantName:null,updateBy:null,updateTime:null},dialogVisible:!1,rows:[],totalpage:null}},methods:{async init(){try{let{pageNum:e,pageSize:t}=this.screen,{code:a,rows:l,total:r}=await this.$api.IotCategory.queryList(e,t);200===+a&&(this.rows=l,this.totalpage=r,this.format(this.rows))}catch(e){}},async initName(){try{let{pageNum:e,pageSize:t,categoryName:a}=this.screen,{code:l,rows:r,total:i}=await this.$api.IotCategory.queryList2(e,t,a);200===+l&&(this.rows=r,this.totalpage=i,this.format(this.rows))}catch(e){}},async modify(e){try{this.dialogVisible=!0;let{code:t,data:a}=await this.$api.IotCategory.updata(e.categoryId);200===t&&(this.popup=a)}catch(t){}},async addCategory(){try{let e=this.$api.IotCategory.addCategory;this.popup.categoryId&&(e=this.$api.IotCategory.updataCategory);let{code:t,msg:a}=await e(this.popup);200===t?(this.handleClose(),this.$message.success(a),this.init()):this.$message.error(a)}catch(e){}},format(e){e.forEach((e=>{1===+e.isSys?e.isSys="是":e.isSys="否",e.createTime=(0,i.formatTime)(e.createTime,"{0}-{1}-{2}")}))},reset(){this.screen.categoryName="",this.init()},handleSizeChange(e){this.pageSize=e,this.init()},handleCurrentChange(e){this.screen.pageNum=e,this.init()},handleClose(){this.popup={categoryId:null,categoryName:"",createBy:null,createTime:null,delFlag:null,isSys:null,orderNum:"",parentId:null,remark:"",tenantId:null,tenantName:null,updateBy:null,updateTime:null},this.dialogVisible=!1}},created(){this.init()}},s=o,n=a(1001),p=(0,n.Z)(s,l,r,!1,null,"3044fbc2",null),c=p.exports}}]);