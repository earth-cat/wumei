"use strict";(self["webpackChunkwumei"]=self["webpackChunkwumei"]||[]).push([[456],{456:function(e,r,s){s.r(r),s.d(r,{default:function(){return d}});var t=function(){var e=this,r=e._self._c;return r("div",{staticClass:"login"},[r("el-main",[r("div",{staticClass:"el-col hidden-md-and-down"},[r("h1",[e._v("物美智能 - 物联美好生活")]),r("h2",[e._v("wumei smart open source iot platform")]),r("el-row",[r("el-button",{attrs:{type:"warning"}},[e._v("返回官网")]),r("el-button",{attrs:{type:"success"}},[e._v("查看文档")]),r("el-button",{on:{click:e.logon}},[e._v("注册账号")])],1),r("div",{staticClass:"showBox"},[r("div",{staticClass:"showh"},[e._v(" 演示 "),r("br"),e._v(" 账号 ")]),r("div",{staticClass:"showz"},[r("span",{staticClass:"showBox2"},[r("p",[e._v("受限管理")]),r("p",[e._v("wumei")]),r("p",[e._v("123456")])]),r("span",{staticClass:"showBox2"},[r("p",[e._v("租户账号")]),r("p",[e._v("wumei-t1")]),r("p",[e._v("123456")])]),r("span",{staticClass:"showBox2"},[r("p",[e._v("普通用户")]),r("p",[e._v("wumei-u1")]),r("p",[e._v("123456")])]),r("span",{staticClass:"showBox2"},[r("p",[e._v("自申用户")]),r("p",[e._v("1qaz123qwe")]),r("p",[e._v("123456")])])])])],1),r("div",{staticClass:"el-col2"},[r("el-form",{ref:"formIns",attrs:{model:e.ruleForm,rules:e.rules}},[r("h3",[e._v("账号登录")]),r("el-form-item",{attrs:{prop:"username"}},[r("el-input",{attrs:{placeholder:"账号"},model:{value:e.ruleForm.username,callback:function(r){e.$set(e.ruleForm,"username","string"===typeof r?r.trim():r)},expression:"ruleForm.username"}},[e._v("账号")])],1),r("el-form-item",{attrs:{prop:"password"}},[r("el-input",{attrs:{"show-password":"",placeholder:"密码"},model:{value:e.ruleForm.password,callback:function(r){e.$set(e.ruleForm,"password","string"===typeof r?r.trim():r)},expression:"ruleForm.password"}})],1),r("el-form-item",{attrs:{prop:"codes"}},[r("el-input",{staticClass:"verify",attrs:{placeholder:"验证码"},on:{click:e.imgCode},model:{value:e.ruleForm.codes,callback:function(r){e.$set(e.ruleForm,"codes","string"===typeof r?r.trim():r)},expression:"ruleForm.codes"}}),r("img",{attrs:{src:"data:image/gif;base64,"+e.bigImg},on:{click:e.imgCode}})],1),r("div",{staticClass:"remember"},[r("el-checkbox",{model:{value:e.remember,callback:function(r){e.remember=r},expression:"remember"}},[e._v("记住密码")])],1),r("el-row",[r("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("登录")])],1)],1)],1)]),r("el-footer",{staticStyle:{height:"auto"}},[e._v("Copyright © 2018-2021 wumei smart All Rights Reserved.")])],1)},o=[],a=(s(7658),s(6280)),i=s.n(a);const l="******";var m={name:"Login",data(){const e=(e,r,s)=>{if(0===r.length)return s(new Error("请输入账号"));let t=/^(?:(?:\+|00)86)?1\d{10}$/,o=/^[a-zA-Z0-9_-]{4,16}$/;if(!t.test(r)&&!o.test(r))return s(new Error("账号格式错误"));s()},r=(e,r,s)=>{if(0===r.length)return s(new Error("请输入密码"));if(r===l)return s();let t=/^.{6,16}$/;if(!t.test(r))return s(new Error("密码格式错误"));s()};return{ruleForm:{username:"",password:"",codes:"",uuid:""},rules:{username:[{validator:e,trigger:"blur"}],password:[{validator:r,trigger:"blur"}]},remember:!0,bigImg:""}},methods:{logon(){this.$router.push("/redirect")},async submit(){try{await this.$refs.formIns.validate();let{username:e,password:r,codes:s,uuid:t}=this.ruleForm;r=r===l?this.passwordload:r;let{code:o,token:a,msg:m}=await this.$api.adminLogin(e,r,s,t);200===+o?(i().storage.set("tk",a),this.$message.success("登录成功"),this.remember?i().storage.set("remember",{username:e,password:r}):i().storage.remove("remember"),this.$router.push("/index")):(this.$message.error(m),this.imgCode())}catch(e){}},async imgCode(){try{let{code:e,uuid:r,img:s}=await this.$api.captImage();200===+e?(this.ruleForm.uuid=r,this.bigImg=s):this.$message.error("验证码获取失败")}catch(e){}}},created(){this.imgCode();let e=i().storage.get("remember");if(e){let{username:r,password:s}=e;this.ruleForm.username=r,this.ruleForm.password=l,this.passwordload=s}}},u=m,n=s(1001),c=(0,n.Z)(u,t,o,!1,null,"686b6c52",null),d=c.exports}}]);