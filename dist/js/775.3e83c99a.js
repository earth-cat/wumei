"use strict";(self["webpackChunkwumei"]=self["webpackChunkwumei"]||[]).push([[775],{1775:function(e,t,a){a.r(t),a.d(t,{default:function(){return c}});var l=function(){var e=this,t=e._self._c;return t("div",{staticClass:"MonitorOnline"},[t("el-card",{staticClass:"box-card"},[t("el-form",{ref:"screen",staticClass:"fromone",attrs:{model:e.screen,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"登录地址"}},[t("el-input",{attrs:{clearable:"",placeholder:"请输入登录地址"},model:{value:e.screen.ipaddr,callback:function(t){e.$set(e.screen,"ipaddr",t)},expression:"screen.ipaddr"}})],1),t("el-form-item",{attrs:{label:"用户名称"}},[t("el-input",{attrs:{clearable:"",placeholder:"请输入用户名"},model:{value:e.screen.userName,callback:function(t){e.$set(e.screen,"userName",t)},expression:"screen.userName"}})],1),t("el-form-item",{staticClass:"search"},[t("el-button",{attrs:{type:"primary"},on:{click:e.initName}},[e._v("搜索")]),t("el-button",{on:{click:e.reset}},[e._v("重置")])],1),t("el-form-item",{staticClass:"add"},[t("el-button",{attrs:{type:"primary",plain:""},on:{click:function(t){e.dialogVisible=!0}}},[e._v("新增")])],1)],1)],1),t("el-card",{staticClass:"box-card"},[t("el-table",{staticClass:"ovfo",staticStyle:{width:"100%"},attrs:{data:e.rows.slice((e.pageNum-1)*e.pageSize,e.pageNum*e.pageSize),fit:"",border:""}},[t("el-table-column",{attrs:{label:"序号",type:"index",width:"50px"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",[e._v(e._s((e.pageNum-1)*e.pageSize+a.$index+1))])]}}])}),t("el-table-column",{attrs:{label:"会话编号",prop:"tokenId","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{label:"登录名称",prop:"userName"}}),t("el-table-column",{attrs:{label:"部门名称",prop:"deptName"}}),t("el-table-column",{attrs:{label:"主机",prop:"ipaddr","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{label:"登录地点",prop:"loginLocation","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{label:"浏览器",prop:"browser"}}),t("el-table-column",{attrs:{label:"操作系统",prop:"os"}}),t("el-table-column",{attrs:{label:"登录时间",prop:"loginTime",width:"180px"}}),t("el-table-column",{attrs:{label:"操作"}})],1),t("el-pagination",{attrs:{background:"","current-page":e.pageNum,"page-sizes":[10,20,30,40],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.totalpage},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},r=[],s={name:"MonitorOnline",data(){return{screen:{ipaddr:"",userName:""},pageNum:1,pageSize:10,rows:[],totalpage:null}},methods:{async init(){try{let{code:e,rows:t,total:a}=await this.$api.MonitorOnline.gitMonitorOnline();200===+e&&(this.rows=t,this.totalpage=a,this.format(this.rows))}catch(e){}},async initName(){try{let{ipaddr:e,userName:t}=this.screen,{code:a,rows:l,total:r}=await this.$api.MonitorOnline.gitMonitorOnline2(e,t);200===+a&&(this.rows=l,this.totalpage=r,this.format(this.rows))}catch(e){}},format(e){e.forEach((e=>{let t=new Date(e.loginTime),a=t.getFullYear(),l=t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1,r=t.getDate()<10?"0"+t.getDate():t.getDate(),s=t.getHours()<10?"0"+t.getHours():t.getHours(),i=t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes(),o=t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds();e.loginTime=`${a}-${l}-${r} ${s}:${i}:${o}`}))},reset(){this.screen.ipaddr="",this.screen.userName="",this.init()},handleSizeChange(e){this.pageSize=e},handleCurrentChange(e){this.pageNum=e}},created(){this.init()}},i=s,o=a(1001),n=(0,o.Z)(i,l,r,!1,null,"5f3e3e6a",null),c=n.exports}}]);