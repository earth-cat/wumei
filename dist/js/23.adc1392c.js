"use strict";(self["webpackChunkwumei"]=self["webpackChunkwumei"]||[]).push([[23],{6023:function(t,e,a){a.r(e),a.d(e,{default:function(){return c}});var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"productEdit"},[e("el-tabs",{attrs:{"tab-position":"left"},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[e("el-tab-pane",{attrs:{label:"基本信息",name:"one"}},[e("el-row",{attrs:{gutter:40}},[e("el-col",{attrs:{span:12}},[e("el-form",{ref:"forms",attrs:{model:t.form,rules:t.rules,"label-width":"80px"}},[e("el-form-item",{attrs:{label:"产品名称",prop:"name"}},[e("el-input",{attrs:{placeholder:"请输入产品名称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),e("el-form-item",{attrs:{label:"产品分类",prop:"shortlist"}},[e("el-select",{attrs:{placeholder:"请选择分类"},model:{value:t.form.shortlist,callback:function(e){t.$set(t.form,"shortlist",e)},expression:"form.shortlist"}},t._l(t.short,(function(t,a){return e("el-option",{key:a,attrs:{label:t.name,value:t.id}})})),1)],1),e("el-form-item",{attrs:{label:"联网方式"}},[e("el-select",{attrs:{placement:"bottom"},model:{value:t.form.dictLabel,callback:function(e){t.$set(t.form,"dictLabel",e)},expression:"form.dictLabel"}},t._l(t.net,(function(t,a){return e("el-option",{key:a,attrs:{label:t.dictLabel,value:t.dictValue}})})),1)],1),e("el-form-item",{attrs:{label:"启用授权"}},[e("el-switch",{on:{change:t.authoriZation},model:{value:t.form.Authorization,callback:function(e){t.$set(t.form,"Authorization",e)},expression:"form.Authorization"}})],1),e("el-form-item",{attrs:{label:"备注信息"}},[e("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入内容"},model:{value:t.form.textarea,callback:function(e){t.$set(t.form,"textarea",e)},expression:"form.textarea"}})],1)],1)],1),e("el-col",{attrs:{span:12}},[e("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px"}},[e("el-form-item",{attrs:{label:"设备类型"}},[e("el-select",{model:{value:t.form.region,callback:function(e){t.$set(t.form,"region",e)},expression:"form.region"}},t._l(t.productType,(function(t,a){return e("el-option",{key:a,attrs:{label:t.dictLabel,value:t.dictValue}})})),1)],1),e("el-form-item",{attrs:{label:"认证方式"}},[e("el-select",{model:{value:t.form.region1,callback:function(e){t.$set(t.form,"region1",e)},expression:"form.region1"}},t._l(t.vertificate,(function(t,a){return e("el-option",{key:a,attrs:{label:t.dictLabel,value:t.dictValue}})})),1)],1),e("el-form-item",{attrs:{label:"产品编号"}},[e("el-input",{attrs:{placeholder:"0",disabled:""},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),e("el-form-item",{attrs:{label:"Mqtt账号"}},[e("el-input",{attrs:{placeholder:"自动生成",disabled:""},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),e("el-form-item",{attrs:{label:"Mqtt密码"}},[e("el-input",{attrs:{placeholder:"自动生成",disabled:""},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),e("el-form-item",{attrs:{label:"产品秘钥"}},[e("el-input",{attrs:{placeholder:"自动生成",disabled:""},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)],1)],1),e("el-col",{attrs:{span:12}},[e("el-upload",{staticClass:"avatar-uploader",attrs:{action:"https://jsonplaceholder.typicode.com/posts/","show-file-list":!1,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload}},[t.imageUrl?e("img",{staticClass:"avatar",attrs:{src:t.imageUrl}}):e("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),e("span",[t._v("请上传 大小不超过 "),e("span",{staticClass:"p"},[t._v("1MB")]),t._v(" 格式为 "),e("span",{staticClass:"p"},[t._v("png/jpg/jpeg")]),t._v(" 的文件")]),e("div",{staticClass:"p"},[t._v("提示：上传后需要提交保存")])],1),e("el-col",{attrs:{span:20,justify:"center",align:"middle"}},[e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm()}}},[t._v("提交")])],1)],1)],1),e("el-tab-pane",{attrs:{label:"产品模型",name:"two",disabled:t.subbtn}},[t._v("产品模型")]),e("el-tab-pane",{attrs:{label:"固件管理",disabled:t.subbtn}},[t._v("固件管理")]),e("el-tab-pane",{attrs:{label:"设备授权",disabled:t.subbtn}},[t._v("设备授权")]),e("el-tab-pane",{attrs:{label:"告警配置",disabled:t.subbtn}},[t._v("告警配置")]),e("el-tab-pane",{attrs:{label:"控制界面",disabled:t.subbtn}},[t._v("控制界面")])],1)],1)},l=[],i={name:"productEdit",data(){return{arr:[],activeName:"one",imageUrl:"",form:{name:"",shortlist:"",dictLabel:"1",Authorization:!1,textarea:"",region:"1",region1:"3"},rules:{name:[{required:!0,message:"产品名称不能为空",trigger:"blur"}],shortlist:[{required:!0,message:"产品分类ID不能为空",trigger:"change"}]},subbtn:!0,short:[],net:[],productType:[],vertificate:[]}},created(){this.network(),this.shortlist(),this.deviceType(),this.vertificateType()},methods:{handleAvatarSuccess(t,e){this.imageUrl=URL.createObjectURL(e.raw)},beforeAvatarUpload(t){const e="image/png/jpg/jpeg "===t.type,a=t.size/1024/1024<1;return e||this.$message.error("上传头像图片只能是 JPG 格式!"),a||this.$message.error("上传头像图片大小不能超过 1MB!"),e&&a},async network(){try{let{data:t,code:e}=await this.$api.products.networking();200===+e&&(this.net=t)}catch(t){}},async shortlist(){try{let{data:t,code:e}=await this.$api.products.shortlist();200===+e&&(this.short=t)}catch(t){}},async deviceType(){try{let{code:t,data:e}=await this.$api.products.productType();200===+t&&(this.productType=e)}catch(t){}},async vertificateType(){try{let{code:t,data:e}=await this.$api.products.vertificate();200===+t&&(this.vertificate=e)}catch(t){}},async submitForm(){await this.$refs.forms.validate(),chenga(),this.$alert("确认要启用授权码吗？","系统提示",{confirmButtonText:"确定",type:"warning"}).then((()=>(this.Authorization=!0,!0)))},chenga(){this.short.forEach((t=>{t.name===this.shortlist&&(this.arr.categoryId=t.id,this.arr.categoryName=t.name)})),this.arr.isAuthorize=this.Authorization,this.arr.productName=this.name,this.arr.vertificateMethod=this.region1,this.arr.networkMethod=this.dictLabel,this.arr.deviceType=this.region,this.arr.productId="0",""!=this.textarea&&(this.arr.remark=this.textarea),""!=this.imageUrl&&(this.arr.imgUrl=this.imageUrl)},authoriZation(){0==this.Authorization?this.$alert("确认要启用授权码吗？","系统提示",{confirmButtonText:"确定",type:"warning"}).then((()=>(this.Authorization=!0,!0))):this.$alert("确认要停用授权码吗？","系统提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>(this.Authorization=!1,!1)))}}},s=i,o=a(1001),n=(0,o.Z)(s,r,l,!1,null,"2501312e",null),c=n.exports}}]);